\section{Experimental Results}
\label{sec:experiments}
% Experimental results

We trained MacroQ learning agents on several standard domains, and
measured the cumulative return obtained using the following option
generation schemes: 
\begin{itemize}
   \item \textbf{None}: No options were used.
   \item \textbf{Random}: Options were generated by randomly connecting
     two nodes in the domain (this is equivalent to $P_0$.
   \item \textbf{Betweenness}: As a representative of bottleneck-based
     schemes, options were generated to take any node to a local maxima
     of betweenness centrality, as described in \cite{Simsek2008}. 
   \item \textbf{Small World}: Options were generated randomly
     connecting two nodes of the domain using an inverse square law, as
     described in \secref{sec:theory}.
\end{itemize}

Each experiment, unless mentioned otherwise, was run for $10$ randomly
generated tasks in the domain; each task ran for $40,000$ epochs, and
was averaged over an ensemble of $20$ agents.

\subsection{Optimal Options}
The agents were run on the following three domains using the algorithm
sketched in \secref{sec:theory}:
\begin{itemize}
   \item \textbf{Arbitrary Navigation}: The agent must reach an
     arbitrary goal state in an obstacle-free $x \times y$ grid-world. 
   \item \textbf{Rooms}: The agent must navigate a floor plan with
     4 rooms to reach an arbitrary goal state.
   \item \textbf{Taxi}: This is the domain described in
     \exref{example:taxi}.
\end{itemize}

The results of these experiments are summarised in
\autoref{tbl:optimal-returns}. Small world options perform significantly
better than the other schemes in navigation-oriented tasks like Rooms or
Arbitrary Navigation. In the Taxi domain, options generated by the
betweenness scheme outperform the small world options. This is expected
because the goal states in this domain lie at betweenness maxima.

\begin{figure*}[th]
    \center
    \subfigure[Options Learnt]{
      \includegraphics[height=2in]{figures/rooms-options}
      \label{fig:rooms-options}
    }
    \subfigure[Cumulative Return (with 200 options)]{
      \includegraphics[height=2in]{figures/rooms-return-200}
      \label{fig:rooms-return}
    }
    \caption{The Rooms Domain}
\end{figure*}

Some of the small world options preferred in Rooms domain are shown in
\figref{fig:rooms-options}. The graph shows several examples of options
that compose together to arrive near the goal state. We have also
plotted the learning behaviour in \figref{fig:rooms-return}. 

\begin{figure*}[th]
    \center
    \subfigure[$k$ vs Cumulative Return]{
      \includegraphics[height=2in]{figures/rooms-exp}
      \label{fig:rooms-exp}
    }
    \subfigure[Options Learnt on a Budget]{
    \includegraphics[height=2in]{figures/rooms-learnt-200}
      \label{fig:rooms-learnt}
    }
    \caption{The Rooms Domain (contd.)}
\end{figure*}

\subsection{Effect of $k$}
We do not yet have a clear understanding of how the exponent $k$ should
be chosen. \figref{fig:rooms-exp} plots $k$ versus the cumulative return
on the Rooms domain. The performance of the agent without options after
$20,000$ epochs is also plotted for reference. There is a range of $k$
($\approx 0.75$ to $1.5$) with good performance, after which the
performance steadily drops. This behaviour is easily explained; as the
exponent goes up, the small world options generated are very short, and
do not help the agent get nearer to the maximal value state. The optimal
range of $k$ is slightly counter-intuitive because the Rooms domain is
a two dimensional lattice with some edges removed. As a consequence of
the reduced connectivity, and perhaps due to stochastic factors, longer
range options are preferred.

\subsection{Options Learnt on a Budget}
In \secref{sec:algo}, we describe an algorithm to construct small world
options efficiently when given a limited number of learning epochs. We
compared the performance of these options with betweenness options
learnt similarly, and have plotted our results in
\figref{fig:rooms-learnt}. Despite using many more
options, the small world options thus created significantly outperform
betweenness options learnt with the same budget, and are even comparable
to the optimal betweenness options.

